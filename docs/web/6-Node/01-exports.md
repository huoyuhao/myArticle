---
meta:
  - name: description
    content: exports
  - name: keywords
    content: require,import,互相导入,exports,
---
# 跨站脚本攻击

## 1. 介绍

+ CommonJS 
通过require引入基础数据类型时，属于复制该变量。
通过require引入复杂数据类型时，数据浅拷贝该对象
出现模块之间的循环引用时，会输出已经执行的模块，而未执行的模块不输出（比较复杂）
CommonJS模块默认export的是一个对象，即使导出的是基础数据类型

ES6模块
不管是基础（复杂）数据类型，都只是对该变量的动态只读引用。动态在于一个模块中变量的变化会影响到另一个模块；
只读在于从某个模块引入一个变量时，不允许修改该变量的值。对于复杂数据类型，可以添加属性和方法，但是不允许指向另一个内存空间。
出现模块之间的循环引用时，只要模块存在某个引用，代码就能够执行。


循环引入
CommonJS 模块
所有代码运行在模块作用域，不会污染全局作用域
模块可以多次加载，但是只会在第一次加载时运行一次，然后运行结果就被缓存了，以后再加载，就直接读取缓存结果。要想让模块再次运行，必须清除缓存。
模块加载的顺序，按照其在代码中出现的顺序

CommonJs模块输出的是一个值的拷贝，ES6模块输出的是值的引用。
CommonJs模块是运行时加载，ES6模块是编译时输出接口。
导入require 导出 exports/module.exports 是 CommonJS 的标准，通常适用范围如 Node.js
import/export 是 ES6 的标准，通常适用范围如 React
require 是赋值过程并且是运行时才执行，也就是同步加载
require 可以理解为一个全局方法，因为它是一个方法所以意味着可以在任何地方执行。
import 是解构过程并且是编译时执行，理解为异步加载
import 会提升到整个模块的头部，具有置顶性，但是建议写在文件的顶部。

commonjs 输出的，是一个值的拷贝，而es6输出的是值的引用；

commonjs 是运行时加载，es6是编译时输出接口；

## 4. 参考资料

https://juejin.cn/post/7004789285886885924
https://www.zhihu.com/question/56820346