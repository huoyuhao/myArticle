---
meta:
  - name: description
    content: JavaScript执行机制
  - name: keywords
    content: JavaScript执行机制,Js作用域链,JavaScript,前端,作用域,作用域链
---
# JavaScript执行机制

## 作用域
> 作用域是指在程序中定义变量的区域，该位置决定了变量的生命周期。通俗地理解，作用域就是变量与函数的可访问范围，即作用域控制着变量和函数的可见性和生命周期。

+ ES6 之前 JavaScript 没有块级作用域,只有全局作用域和函数作用域(因为eval我们平时开发中几乎不会用到它，这里不讨论)。
+ ES6的到来，为我们提供了‘块级作用域’,可通过新增命令let和const来体现。
+ 作用域与执行上下文是完全不同的两个概念。
+ 作用域就是一个独立的地盘，让变量不会外泄、暴露出去。也就是说作用域最大的用处就是隔离变量，不同作用域下同名变量不会有冲突。

1. 全局作用域：在最外层函数定义的变量即拥有全局作用域，对于任意函数来说，都可以访问到。例如：
```js
{
  var a = 1 
  var fn = function () {
      console.log(a) // 1
  }
  fn()
}
```
2. 局部作用域：和全局作用域相反，局部作用域的变量即是在特定代码块中才能过访问，对于外部是不能够访问的。注意：在函数内部定义变量的时候，如果不用var，那么你声明的就是全局变量了。
```js
{
  var a = 1
  var fn = function () {
      var b = 2
      console.log(a) // 1
  }
  fn()
  console.log(b) // b is not defined
}
```
3. 块级作用域：在代码块中使用let定义的变量，只能在当前代码块中进行访问。块级作用域可以形成暂时性死区。
```js
var fn = function () {
  for(let i = 0; i < 10; i++) {
    console.log(i) // 1-9
  }
  console.log(i) // undefined
}
fn()
```

## 变量提升

### JavaScript 中的声明和赋值
1. 变量的声明和赋值
```js
var name = 'yuhoo'
// 等同于
var name    //声明部分
name = 'yuhoo'  //赋值部分
```
2. 函数的声明和赋值
```js
function foo () {
  console.log('foo')
}

var bar = function () {
  console.log('bar')
}
```
+ 第一个函数 foo 是一个完整的函数声明，也就是说没有涉及到赋值操作；
+ 第二个函数是先声明变量 bar，再把`function(){console.log('bar')}`赋值给 bar

**所谓的变量提升，是指在 JavaScript 代码执行过程中，JavaScript 引擎把变量的声明部分和函数的声明部分提升到代码开头的“行为”。变量被提升后，会给变量设置默认值，这个默认值就是我们熟悉的 undefined**

```js
showName()
console.log(name)
var name = 'yuhoo'
function showName () {
  console.log('函数showName被执行')
}
// 等同于

/*
* 变量提升部分
*/
// 把变量 name 提升到开头，
// 同时给 name 赋值为undefined
var name = undefined
// 把函数showName提升到开头
function showName () {
  console.log('函数showName被执行')
}
/*
* 可执行代码部分
*/
showName()
console.log(name)
// 去掉var声明部分，保留赋值语句
name = 'yuhoo'
```
**函数和变量在执行之前都提升到了代码开头**

## 执行流程








