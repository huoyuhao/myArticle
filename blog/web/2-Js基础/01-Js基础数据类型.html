<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript基础数据类型</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="Js基础数据类型">
    <meta name="keywords" content="Js基础数据类型,JavaScript,前端,数据类型,">
    <meta name="author" content="liam">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="preload" href="/assets/css/0.styles.f707576d.css" as="style"><link rel="preload" href="/assets/js/app.76936a95.js" as="script"><link rel="preload" href="/assets/js/2.cfb1ba91.js" as="script"><link rel="preload" href="/assets/js/47.4a7664ed.js" as="script"><link rel="prefetch" href="/assets/js/10.4653acc3.js"><link rel="prefetch" href="/assets/js/11.be92f739.js"><link rel="prefetch" href="/assets/js/12.366ef5ef.js"><link rel="prefetch" href="/assets/js/13.96ad59b4.js"><link rel="prefetch" href="/assets/js/14.14aa169b.js"><link rel="prefetch" href="/assets/js/15.139be24c.js"><link rel="prefetch" href="/assets/js/16.f17e8d8f.js"><link rel="prefetch" href="/assets/js/17.3bcdeb02.js"><link rel="prefetch" href="/assets/js/18.5f449237.js"><link rel="prefetch" href="/assets/js/19.ffb3df9c.js"><link rel="prefetch" href="/assets/js/20.8df82486.js"><link rel="prefetch" href="/assets/js/21.c5e36f75.js"><link rel="prefetch" href="/assets/js/22.c88a38ec.js"><link rel="prefetch" href="/assets/js/23.a68d4e6f.js"><link rel="prefetch" href="/assets/js/24.7f4b7c92.js"><link rel="prefetch" href="/assets/js/25.fe9825f2.js"><link rel="prefetch" href="/assets/js/26.c895d4fb.js"><link rel="prefetch" href="/assets/js/27.ba7eb5d6.js"><link rel="prefetch" href="/assets/js/28.495542fd.js"><link rel="prefetch" href="/assets/js/29.5bcd5cb1.js"><link rel="prefetch" href="/assets/js/3.85bfe3d7.js"><link rel="prefetch" href="/assets/js/30.81fd2d5c.js"><link rel="prefetch" href="/assets/js/31.7618d52a.js"><link rel="prefetch" href="/assets/js/32.dd40b166.js"><link rel="prefetch" href="/assets/js/33.86f5b939.js"><link rel="prefetch" href="/assets/js/34.2c3c3e66.js"><link rel="prefetch" href="/assets/js/35.792302c3.js"><link rel="prefetch" href="/assets/js/36.af434f35.js"><link rel="prefetch" href="/assets/js/37.cd4125bf.js"><link rel="prefetch" href="/assets/js/38.4bbdfc2a.js"><link rel="prefetch" href="/assets/js/39.4ec672cd.js"><link rel="prefetch" href="/assets/js/4.bd0ac780.js"><link rel="prefetch" href="/assets/js/40.6104256b.js"><link rel="prefetch" href="/assets/js/41.f9d63419.js"><link rel="prefetch" href="/assets/js/42.bd46a461.js"><link rel="prefetch" href="/assets/js/43.b2e5ab1d.js"><link rel="prefetch" href="/assets/js/44.1422d856.js"><link rel="prefetch" href="/assets/js/45.17716bdf.js"><link rel="prefetch" href="/assets/js/46.5a8c7673.js"><link rel="prefetch" href="/assets/js/48.c809aa27.js"><link rel="prefetch" href="/assets/js/49.222fe226.js"><link rel="prefetch" href="/assets/js/5.b6df23a7.js"><link rel="prefetch" href="/assets/js/50.af1bf195.js"><link rel="prefetch" href="/assets/js/51.02125055.js"><link rel="prefetch" href="/assets/js/52.3c606cdb.js"><link rel="prefetch" href="/assets/js/53.437c0e04.js"><link rel="prefetch" href="/assets/js/54.879ee566.js"><link rel="prefetch" href="/assets/js/55.b931f0de.js"><link rel="prefetch" href="/assets/js/56.48e7f4aa.js"><link rel="prefetch" href="/assets/js/57.0cc01da0.js"><link rel="prefetch" href="/assets/js/58.83b6fdd1.js"><link rel="prefetch" href="/assets/js/59.dad8bbb7.js"><link rel="prefetch" href="/assets/js/6.a9839fc4.js"><link rel="prefetch" href="/assets/js/60.ca515401.js"><link rel="prefetch" href="/assets/js/61.5c8a06b3.js"><link rel="prefetch" href="/assets/js/62.a98bf649.js"><link rel="prefetch" href="/assets/js/63.71a2cd52.js"><link rel="prefetch" href="/assets/js/64.35c80339.js"><link rel="prefetch" href="/assets/js/65.8d45f482.js"><link rel="prefetch" href="/assets/js/66.e7ac0734.js"><link rel="prefetch" href="/assets/js/7.77ac725b.js"><link rel="prefetch" href="/assets/js/8.9e318401.js"><link rel="prefetch" href="/assets/js/9.f423a0b4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f707576d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/header-logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/frame/" class="nav-link">
  Frame
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  Network
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  Other
</a></div><div class="nav-item"><a href="https://github.com/huoyuhao/myArticle" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/frame/" class="nav-link">
  Frame
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  Network
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  Other
</a></div><div class="nav-item"><a href="https://github.com/huoyuhao/myArticle" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码规范</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Js基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/2-Js基础/00-Js基础总结.html" class="sidebar-link">Js基础总结</a></li><li><a href="/web/2-Js基础/01-Js基础数据类型.html" class="active sidebar-link">Js基础数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_1-值类型与引用类型" class="sidebar-link">1. 值类型与引用类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_1-1-数据类型分类" class="sidebar-link">1.1 数据类型分类</a></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_1-2-数据访问" class="sidebar-link">1.2 数据访问</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_2-数据类型判断" class="sidebar-link">2. 数据类型判断</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_2-1-typeof" class="sidebar-link">2.1 typeof</a></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_2-2-instanceof" class="sidebar-link">2.2 Instanceof</a></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_2-3-instanceof-运算符代码" class="sidebar-link">2.3 instanceof 运算符代码</a></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_2-4-constructor" class="sidebar-link">2.4 constructor</a></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_2-5-object-prototype-tostring-call-obj" class="sidebar-link">2.5 Object.prototype.toString.call(obj)</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_3-数据类型转换" class="sidebar-link">3. 数据类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_3-1-基础介绍" class="sidebar-link">3.1 基础介绍</a></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_3-2-类型转换涉及函数" class="sidebar-link">3.2 类型转换涉及函数</a></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_3-3-类型转换与操作符" class="sidebar-link">3.3 类型转换与操作符</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/2-Js基础/01-Js基础数据类型.html#_4-参考文章" class="sidebar-link">4. 参考文章</a></li></ul></li><li><a href="/web/2-Js基础/01-Js数组.html" class="sidebar-link">Js数组</a></li><li><a href="/web/2-Js基础/01-Js正则表达式.html" class="sidebar-link">Js正则表达式</a></li><li><a href="/web/2-Js基础/02-Js执行机制.html" class="sidebar-link">Js执行机制</a></li><li><a href="/web/2-Js基础/03-Js中This.html" class="sidebar-link">Js中This</a></li><li><a href="/web/2-Js基础/03-Js中的call方法.html" class="sidebar-link">Js中的call方法</a></li><li><a href="/web/2-Js基础/03-Js中的new操作符.html" class="sidebar-link">Js中的new操作符</a></li><li><a href="/web/2-Js基础/04-Js原型链.html" class="sidebar-link">Js原型链</a></li><li><a href="/web/2-Js基础/05-Js防抖节流.html" class="sidebar-link">Js防抖节流</a></li><li><a href="/web/2-Js基础/06-Js深拷贝.html" class="sidebar-link">Js深拷贝</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Js进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Js安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript基础数据类型"><a href="#javascript基础数据类型" class="header-anchor">#</a> JavaScript基础数据类型</h1> <h2 id="_1-值类型与引用类型"><a href="#_1-值类型与引用类型" class="header-anchor">#</a> 1. 值类型与引用类型</h2> <h3 id="_1-1-数据类型分类"><a href="#_1-1-数据类型分类" class="header-anchor">#</a> 1.1 数据类型分类</h3> <ul><li>基本数据类型：<code>String Boolean Number Symbol（ES6新增） Undefined Null</code></li> <li>复杂数据类型：<code>Object</code></li> <li>基本数据类型中有两个为特殊数据类型： <code>null undefined</code></li> <li>常见内置对象：<code>Boolean Number String Array Math Date RegExp Function...</code></li></ul> <p><em><code>Symbol</code>(ECMAScript 6 新定义数据类型）暂时不涉及</em></p> <h3 id="_1-2-数据访问"><a href="#_1-2-数据访问" class="header-anchor">#</a> 1.2 数据访问</h3> <ul><li>基本数据类型在栈空间存储，访问方式是按值访问。<strong>基本类型（值类型）在调用函数的时候，传递的是值。</strong></li> <li>引用类型的对象在堆中存储，地址在栈中存储。<strong>引用类型，在函数调用的时候，传递的是地址（引用）。</strong></li></ul> <p>具体如下图所示：</p> <p><img src="/img/js%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-1.png" alt="js数据类型-1"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">addTen</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  num <span class="token operator">+=</span> <span class="token number">10</span>
  <span class="token keyword">return</span> num
<span class="token punctuation">}</span>
<span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">20</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">addTen</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 20，没有变化</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 30</span>

<span class="token keyword">function</span> <span class="token function">setName</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;liam&quot;</span>
  obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;tom&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'liam1'</span>
<span class="token function">setName</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// &quot;liam&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_2-数据类型判断"><a href="#_2-数据类型判断" class="header-anchor">#</a> 2. 数据类型判断</h2> <h3 id="_2-1-typeof"><a href="#_2-1-typeof" class="header-anchor">#</a> 2.1 typeof</h3> <p>typeof操作符是检测基本类型的最佳工具</p> <table><thead><tr><th>返回结果</th> <th>含义</th></tr></thead> <tbody><tr><td>undefined</td> <td>未定义</td></tr> <tr><td>boolean</td> <td>布尔值</td></tr> <tr><td>string</td> <td>字符串</td></tr> <tr><td>number</td> <td>数值</td></tr> <tr><td>object</td> <td>对象或null</td></tr> <tr><td>function</td> <td>函数</td></tr></tbody></table> <p>对未初始化的变量执行<code>typeof</code>操作符会返回<code>undefined</code>值，而对未声明的变量执行<code>typeof</code>操作符同样也会返回<code>undefined</code>值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> test <span class="token comment">// 这个变量声明之后默认取得了 undefined 值</span>
<span class="token comment">// var age // 下面这个变量并没有声明</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> test<span class="token punctuation">)</span> <span class="token comment">// &quot;undefined&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> age<span class="token punctuation">)</span> <span class="token comment">// &quot;undefined&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>typeof原理：不同的对象在底层都表示为二进制，在Javascript中二进制前（低）三位存储其类型信息</p> <ul><li>000: 对象</li> <li>010: 浮点数</li> <li>100：字符串</li> <li>110：布尔</li> <li>1：整数</li></ul> <p>null：null的二进制表示全为0，自然前三位也是0，所以执行typeof时会返回&quot;object&quot;</p> <p>undefined：用 −2^30 整数来表示（一个超出整型范围的数）</p> <p>ES6 的 typeof 是如何对待函数和对象类型的：</p> <ul><li>如果一个对象（Object）没有实现 [[Call]] 内部方法，那么它就返回 object</li> <li>如果一个对象（Object）实现了 [[Call]] 内部方法，那么它就返回 function</li></ul> <p>一个对象如果支持了内部的 [[Call]] 方法，那么它就可以被调用，就变成了函数，所以叫做函数对象</p> <p><strong>注意首字母为小写字母 例如： <code>typeof 'abc'=== 'string'</code></strong></p> <h3 id="_2-2-instanceof"><a href="#_2-2-instanceof" class="header-anchor">#</a> 2.2 Instanceof</h3> <blockquote><p>instanceof 运算符用来检测 constructor.prototype 是否存在于参数 object 的原型链上</p></blockquote> <p>所以<code>instanceof</code>可以用于判断<code>typeof</code>返回<code>object</code>的引用类型存储值的类型</p> <p>JavaScript 中一切皆对象，如下代码第3行返回<code>false</code>，其实问题的关键在于<code>typeof str</code>返回string并不是<code>object</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;This is a simple string&quot;</span>
<span class="token keyword">var</span> newStr    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;String created with constructor&quot;</span><span class="token punctuation">)</span>
str <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">// 返回 false, 检查原型链会找到 undefined</span>
newStr <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment">// 返回 true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这样 <code>Boolean Number</code>是一样的逻辑。还剩下两种基本类型：<code>Null Undefined</code>
undefined 当我们对变量只声明没有初始化时，输出为 undefined，typeof undefined 返回的是 undefined 也不是 object 类型，所以 undefined 并不是任何对象的实例。</p> <p>null 表示的是空对象，虽然 typeof null 是 object，但是 null 和 undefined 一样并没有任何属性和方法，在 instanceof 定义中也有判断，如果类型不是 object（这个类型判断并不是跟 typeof 返回值一样），就返回 false。</p> <p><img src="/img/js%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2.png" alt="js数据类型"></p> <p>使用 instanceof 就是确定原型和实例之间的关系</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">Fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">Fn</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>instanceof 还可以在继承关系中用来判断一个实例是否属于它的父类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 判断 f2 是否是 Fn2 类的实例 , 并且是否是其父类型的实例</span>
<span class="token keyword">function</span> <span class="token function">Father</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// JavaScript 原型继承</span>
<span class="token keyword">var</span>  f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">Son</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">Father</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-3-instanceof-运算符代码"><a href="#_2-3-instanceof-运算符代码" class="header-anchor">#</a> 2.3 instanceof 运算符代码</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">instance_of</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token constant">L</span><span class="token punctuation">,</span> <span class="token constant">R</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//L 表示左表达式，R 表示右表达式</span>
  <span class="token keyword">var</span> <span class="token constant">O</span> <span class="token operator">=</span> <span class="token class-name">R</span><span class="token punctuation">.</span>prototype <span class="token comment">// 取 R 的显示原型</span>
  <span class="token constant">L</span> <span class="token operator">=</span> <span class="token constant">L</span><span class="token punctuation">.</span>__proto__ <span class="token comment">// 取 L 的隐式原型</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">L</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">O</span> <span class="token operator">===</span> <span class="token constant">L</span><span class="token punctuation">)</span> <span class="token comment">// 这里重点：当 O 严格等于 L 时，返回 true</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token constant">L</span> <span class="token operator">=</span> <span class="token constant">L</span><span class="token punctuation">.</span>__proto__
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2-4-constructor"><a href="#_2-4-constructor" class="header-anchor">#</a> 2.4 constructor</h3> <blockquote><p>constructor 属性返回对创建此对象的数组函数的引用。</p></blockquote> <p><code>object.constructor</code> 其中<code>object</code> 是一个对象或函数的名称。
<code>constructor</code> 属性是每个具有原型的对象的原型成员。  这包括除 Global 和 Math 对象之外的所有内部 JavaScript 对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'abc'</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> String <span class="token comment">// true</span>
<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> Number <span class="token comment">// true</span>
<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> Boolean <span class="token comment">// true</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> Array <span class="token comment">// true</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'liam'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> Object <span class="token comment">// true</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> Function <span class="token comment">// true</span>
<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> Date <span class="token comment">// true</span>
<span class="token punctuation">(</span><span class="token regex">/[a-z]/</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> RegExp <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="/img/js%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-3.png" alt="js数据类型"></p> <p>下面是使用new创建的基础数据类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span>
str<span class="token punctuation">.</span>constructor <span class="token operator">===</span> String <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在继承关系中用来判断会出现错误</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Father</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// JavaScript 原型继承</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Son<span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Father<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>解决construtor的问题通常是让对象的constructor手动指向自己：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Father</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Son</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// JavaScript 原型继承</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Son <span class="token comment">// 将自己的类赋值给对象的constructor属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Son<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Father<span class="token punctuation">)</span> <span class="token comment">// 基类不会报true了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-5-object-prototype-tostring-call-obj"><a href="#_2-5-object-prototype-tostring-call-obj" class="header-anchor">#</a> 2.5 Object.prototype.toString.call(obj)</h3> <p><strong>Object.prototype.toString.call() 最准确最常用的方式。首先获取Object原型上的toString方法，让方法执行，让toString方法中的this指向第一个参数的值。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Undefined]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Null]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Boolean]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Number]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object String]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Array]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Function]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Date]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object RegExp]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Error]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span> <span class="token comment">// &quot;[object HTMLDocument]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// &quot;[object Window]&quot; window是全局对象global的引用</span>
<span class="token comment">// 使用new创建的基础数据类型对象</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// &quot;[object String]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_3-数据类型转换"><a href="#_3-数据类型转换" class="header-anchor">#</a> 3. 数据类型转换</h2> <h3 id="_3-1-基础介绍"><a href="#_3-1-基础介绍" class="header-anchor">#</a> 3.1 基础介绍</h3> <p>js在一些操作符的作用下会进行隐式转换，涉及隐式转换最多的两个运算符 <code>+</code> 和 <code>==</code>，下面来介绍一下。</p> <ul><li><code>+</code> 可能是字符串拼接操作，也可能是数字相加</li> <li><code>==</code>不同于<code>===</code>存在数据类型转换</li> <li><code>- * % / &gt; &lt;</code>等其他操作符只会针对number类型，所以其都是把其他类型转换成数字类型</li> <li><code>&amp;&amp; || !</code>与或非操作符是进行布尔运算的，所以会把他们转换成布尔值</li></ul> <p>可以看一下下面的例子，下文中会依次介绍</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'123'</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// 122</span>
<span class="token string">'123a'</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// NaN</span>
<span class="token string">'123'</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 1231</span>
<span class="token number">NaN</span> <span class="token operator">+</span> <span class="token string">'123a'</span> <span class="token comment">// NaN123a</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token comment">// false</span>
<span class="token keyword">null</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token comment">// true</span>
<span class="token number">2</span> <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token comment">// false</span>
<span class="token string">''</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>隐式转换中主要涉及到三种转换：</p> <table><thead><tr><th>含义</th> <th>函数名称</th></tr></thead> <tbody><tr><td>将值转为原始值</td> <td><code>ToPrimitive()</code></td></tr> <tr><td>将值转为数字</td> <td><code>ToNumber()</code></td></tr> <tr><td>将值转为字符串</td> <td><code>ToString()</code></td></tr> <tr><td>将值转为布尔值</td> <td><code>ToBoolean()</code></td></tr></tbody></table> <h3 id="_3-2-类型转换涉及函数"><a href="#_3-2-类型转换涉及函数" class="header-anchor">#</a> 3.2 类型转换涉及函数</h3> <h4 id="_3-2-1-通过tonumber将值转换为数字"><a href="#_3-2-1-通过tonumber将值转换为数字" class="header-anchor">#</a> 3.2.1 通过ToNumber将值转换为数字</h4> <table><thead><tr><th>参数类型</th> <th>转换结果</th> <th>举例</th></tr></thead> <tbody><tr><td>Undefined</td> <td>NaN</td> <td><code>undefined +0 // NaN</code></td></tr> <tr><td>Null</td> <td>+0</td> <td><code>null &gt;=0 // true</code></td></tr> <tr><td>Boolean</td> <td>true转换1，false转换为+0</td> <td><code>true + 1 // 2</code></td></tr> <tr><td>String</td> <td>将字符串中内容转化为数字，转化失败返回NaN</td> <td><code>'123'-1 // 122</code></td></tr> <tr><td>Object</td> <td>先用ToPrimitive(obj, Number)转换为原始值，再用ToNumber转换为数字</td> <td><code>[2]-1 // 1</code></td></tr></tbody></table> <p><strong><code>''</code>空字符串转换为数字为 0</strong></p> <h4 id="_3-2-2-通过tostring将值转换为字符串"><a href="#_3-2-2-通过tostring将值转换为字符串" class="header-anchor">#</a> 3.2.2 通过ToString将值转换为字符串</h4> <table><thead><tr><th>参数类型</th> <th>转换结果</th> <th>举例</th></tr></thead> <tbody><tr><td>Undefined</td> <td>'undefined'</td> <td><code>undefined + '123' // undefined123</code></td></tr> <tr><td>Null</td> <td>'null'</td> <td><code>null + '123' // null123</code></td></tr> <tr><td>Boolean</td> <td>转换为'true' 或 'false'</td> <td><code>'false' + '123' // false123</code></td></tr> <tr><td>Number</td> <td>数字转换字符串</td> <td><code>-17.5 + '123' // -17.5123</code></td></tr> <tr><td>Object</td> <td>先用ToPrimitive(obj, String)转换为原始值，再用ToString转换为数字</td> <td><code>[key='name',1]+'123a' // name,1123a</code></td></tr></tbody></table> <h4 id="_3-2-3-通过toboolean将值转换为布尔值"><a href="#_3-2-3-通过toboolean将值转换为布尔值" class="header-anchor">#</a> 3.2.3 通过ToBoolean将值转换为布尔值</h4> <table><thead><tr><th>参数类型</th> <th>转换结果</th> <th>举例</th></tr></thead> <tbody><tr><td>Undefined</td> <td>false</td> <td><code>!!undefined // false</code></td></tr> <tr><td>Null</td> <td>false</td> <td><code>!!null // false</code></td></tr> <tr><td>Number</td> <td>0、NaN为false，其他为true</td> <td><code>!!0 // false</code></td></tr> <tr><td>String</td> <td>空字符串（长度为0）为false，其他为true</td> <td><code>!!'' // false</code></td></tr> <tr><td>Object</td> <td>true</td> <td><code>!![] !!{} // true</code></td></tr></tbody></table> <p><strong>除了这六个值（<code>undefined、null 、false、0、NaN、''</code>）转换为false，其他都为true</strong></p> <h4 id="_3-2-4-通过toprimitive转换值"><a href="#_3-2-4-通过toprimitive转换值" class="header-anchor">#</a> 3.2.4 通过ToPrimitive转换值</h4> <p>调用 ToPrimitive 函数将对象转化为原始类型。先看一下下面的内容，是不是头大，没关系，我们一点点讲解</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// NaN</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// &quot;&quot;</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// -1</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// NaN</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 1</span>
<span class="token number">1</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 1[object Object]</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// [object Object]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>ToPrimitive(input, hint)</code></p> <table><thead><tr><th>参数名称</th> <th>参数含义</th></tr></thead> <tbody><tr><td>input</td> <td>将要转换的值</td></tr> <tr><td>hint</td> <td>转换类型，有Number/String/default三个分类</td></tr></tbody></table> <h5 id="_3-2-4-1-如果hint被标记为number"><a href="#_3-2-4-1-如果hint被标记为number" class="header-anchor">#</a> 3.2.4.1 如果hint被标记为Number</h5> <ol><li>input为原始值，直接返回input</li> <li>否则，调用input对象的valueOf()方法，如果结果是原始类型，则返回这个原始值</li> <li>否则，调用input对象的toString()方法，如果结果是原始类型，则返回这个原始值</li> <li>否则，抛出TypeError异常</li></ol> <h5 id="_3-2-4-2-如果hint被标记为string"><a href="#_3-2-4-2-如果hint被标记为string" class="header-anchor">#</a> 3.2.4.2 如果hint被标记为String</h5> <ol><li>input为原始值，直接返回input</li> <li>否则，调用input对象的toString()方法，如果结果是原始类型，则返回这个原始值</li> <li>否则，调用input对象的valueOf()方法，如果结果是原始类型，则返回这个原始值</li> <li>否则，抛出TypeError异常</li></ol> <h5 id="_3-2-4-3-如果没有设置hint这个参数时，会按照如下来自动设置"><a href="#_3-2-4-3-如果没有设置hint这个参数时，会按照如下来自动设置" class="header-anchor">#</a> 3.2.4.3 如果没有设置hint这个参数时，会按照如下来自动设置</h5> <ol><li>input对象为Date类型，则hint被设置为String</li> <li>否则，hint被设置为Number</li></ol> <h5 id="_3-2-4-4-valueof方法解析"><a href="#_3-2-4-4-valueof方法解析" class="header-anchor">#</a> 3.2.4.4 valueOf方法解析</h5> <ol><li>Number、Boolean、String这三种构造函数生成的基础值的对象形式，通过valueOf转换后会变成相应的原始值。</li> <li>Date这种特殊的对象，其原型Date.prototype上内置的valueOf函数将日期转换为日期的毫秒的形式的数值。</li> <li>除此之外返回的都为this，即对象本身：(有问题欢迎告知)</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>
num<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 123</span>
<span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1545879601992</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
arr<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> arr <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_3-2-4-5-tostring方法解析"><a href="#_3-2-4-5-tostring方法解析" class="header-anchor">#</a> 3.2.4.5 toString方法解析</h5> <ol><li>Number、Boolean、String、Array、Date、RegExp、Function这几种构造函数生成的对象，通过toString转换后会变成相应的字符串的形式，因为这些构造函数上封装了自己的toString方法。</li> <li>除以上对象及其实例化对象之外，其他对象返回的都是该对象的类型，(有问题欢迎告知)，都是继承的Object.prototype.toString方法。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token class-name">RegExp</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '1,2,3'</span>
<span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
time<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Thu Dec 27 2018 11:06:31 GMT+0800 (中国标准时间)&quot;</span>
<span class="token keyword">var</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">'123'</span><span class="token punctuation">}</span>
func<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;function () { return '123'}&quot;</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Object]&quot;</span>
Math<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Math]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>看一个经典的面试题：<code>a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3</code> 什么情况下为 true ？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  i<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 或 valueOf</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span>i<span class="token operator">++</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>    <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>a.i 最开始为1，执行 a == 1时，会调用 toString() 方法，得到 true 后，a.i 自增为 2，然后继续执行 a.i == 2，如此依次执行。
如果已经掌握了本文，那么不难知道，这里的 toString 也可以是 valueOf 或 ES6 中的 [Symbol.toPrimitive] 。</p> <h3 id="_3-3-类型转换与操作符"><a href="#_3-3-类型转换与操作符" class="header-anchor">#</a> 3.3 类型转换与操作符</h3> <table><thead><tr><th>操作符</th> <th>名称</th> <th>转换类型</th></tr></thead> <tbody><tr><td>++/--</td> <td>递增/递减</td> <td>Number</td></tr> <tr><td>-/+</td> <td>一元加/减</td> <td>Number</td></tr> <tr><td>-/*//</td> <td>减法/乘法/除法</td> <td>Number</td></tr> <tr><td>!</td> <td>逻辑非</td> <td>Boolean</td></tr></tbody></table> <h4 id="_3-3-1-expr1-expr2加法操作符"><a href="#_3-3-1-expr1-expr2加法操作符" class="header-anchor">#</a> 3.3.1 <code>expr1 + expr2</code>加法操作符</h4> <ul><li>如果expr1和expr2都是数字，执行常规的加法计算</li> <li>如果expr1和expr2不全是数字，则把对象、数值或布尔值等，调用它们的 toString()方法取得相应的字符串值。</li> <li>对于 undefined 和 null，则分别调用 String()函数并取得字符串&quot;undefined&quot;和&quot;null&quot;，再将两个字符串拼接起来。</li></ul> <h4 id="_3-3-2-expr1-expr2"><a href="#_3-3-2-expr1-expr2" class="header-anchor">#</a> 3.3.2 <code>expr1 &amp;&amp; expr2</code></h4> <ul><li>如果expr1 能转换成false则返回expr1，否则返回expr2。</li> <li>因此，与布尔值一起使用时，如果两个操作数都为true时&amp;&amp;返回true，否则返回false。</li></ul> <h4 id="_3-3-3-expr1-expr2"><a href="#_3-3-3-expr1-expr2" class="header-anchor">#</a> 3.3.3 <code>expr1 || expr2</code></h4> <ul><li>如果expr1能转换成true则返回expr1，否则返回expr2。</li> <li>因此，与布尔值一起使用时，如果任意一个操作数为true时，返回true。</li></ul> <h4 id="_3-3-4-小于（-）、大于（-）、小于等于（-）和大于等于（-）"><a href="#_3-3-4-小于（-）、大于（-）、小于等于（-）和大于等于（-）" class="header-anchor">#</a> 3.3.4 <code>小于（&lt;）、大于（&gt;）、小于等于（&lt;=）和大于等于（&gt;=）</code></h4> <ul><li>操作符都返回一个布尔值</li> <li>如果两个操作数都是数值，则执行数值比较。</li> <li>如果两个操作数都是字符串，则比较两个字符串对应的字符编码值（可以通过字符串的 charCodeAt() 函数获取字符编码值）。</li> <li>如果一个操作数是数值，则将另一个操作数转换为一个数值，然后执行数值比较。</li> <li>如果一个操作数是对象，则调用这个对象的 valueOf() 方法，用得到的结果按照前面的规则执行比较。如果对象没有valueOf()方法，则调用 toString()方法，并用得到的结果根据前面的规则执行比较。</li> <li>如果一个操作数是布尔值，则先将其转换为数值，然后再执行比较。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> result1 <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">-</span> <span class="token boolean">true</span> <span class="token comment">// 4，因为true被转换成了1</span>
<span class="token keyword">var</span> result2 <span class="token operator">=</span> <span class="token number">NaN</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// NaN</span>
<span class="token keyword">var</span> result3 <span class="token operator">=</span> <span class="token string">&quot;23&quot;</span> <span class="token operator">&lt;</span> <span class="token string">&quot;3&quot;</span> <span class="token comment">// true</span>
<span class="token keyword">var</span> result4 <span class="token operator">=</span> <span class="token string">&quot;23&quot;</span> <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token comment">// false</span>
<span class="token keyword">var</span> result5 <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token comment">// false</span>
<span class="token keyword">var</span> result6 <span class="token operator">=</span> <span class="token number">NaN</span> <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token comment">// false</span>
<span class="token keyword">var</span> result7 <span class="token operator">=</span> <span class="token number">NaN</span> <span class="token operator">&gt;=</span> <span class="token number">3</span> <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">||</span> <span class="token string">'NaN'</span><span class="token punctuation">)</span> <span class="token comment">// 返回 NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// 返回 '' 空字符串</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token comment">// 返回 undefined</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">)</span> <span class="token comment">// 返回 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">&amp;&amp;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 返回 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_3-3-5-expr1-expr2"><a href="#_3-3-5-expr1-expr2" class="header-anchor">#</a> 3.3.5 <code>expr1 == expr2</code></h4> <ul><li>如果一个值是null, 另一个是undefined，则它们相等</li> <li>如果一个值是数字，另一个是字符串，先将字符串转换为数字，然后使用转换后的值进行比较</li> <li>如果其中一个值是true，则将其转换为1再进行比较。如果其中一个值是false，则将其转换为0再进行比较</li> <li>如果一个值是对象，另一个值是数字或字符串，则将对象转换为原始值，然后再进行比较。对象通过toString()方法或者valueOf()方法转换为原始值，JavaScript语言核心的内置类先尝试使用valueOf()，再尝试使用toString()，除了日期类，日期类只能使用toString()转换，那些不是JavaScript语言核心中的对象则通过各自的实现中定义的方法转换为原始值</li></ul> <h2 id="_4-参考文章"><a href="#_4-参考文章" class="header-anchor">#</a> 4. 参考文章</h2> <p><a href="https://www.cnblogs.com/ziyunfei/archive/2012/11/05/2754156.html" target="_blank" rel="noopener noreferrer">【JavaScript:Object.prototype.toString方法的原理】<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.xieluping.cn/2017/08/18/instanceof/" target="_blank" rel="noopener noreferrer">【JavaScript instanceof 操作符】<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://juejin.im/post/5a7172d9f265da3e3245cbca" target="_blank" rel="noopener noreferrer">你所忽略的js隐式转换<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://juejin.cn/post/6844903505606492173" target="_blank" rel="noopener noreferrer">理清JS中等于（==）和全等（===）那些纠缠不清的关系<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>JavaScript高级程序设计（第3版）</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/23/2022, 5:16:59 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web/2-Js基础/00-Js基础总结.html" class="prev">
        Js基础总结
      </a></span> <span class="next"><a href="/web/2-Js基础/01-Js数组.html">
        Js数组
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.76936a95.js" defer></script><script src="/assets/js/2.cfb1ba91.js" defer></script><script src="/assets/js/47.4a7664ed.js" defer></script>
  </body>
</html>
